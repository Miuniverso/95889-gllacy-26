let feedbackBtn=document.querySelector(".information-btn"),feedbackForm=document.querySelector(".feedback-form"),overlay=document.querySelector(".overlay"),closeFormBtn=document.querySelector(".feedback-close-btn"),name=feedbackForm.querySelector("[name=name-last-name-input]"),email=feedbackForm.querySelector("[name=email-comment-input]"),comment=feedbackForm.querySelector("[name=comment-input]"),isStorageSupport=!0,storage="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(a){isStorageSupport=!1}feedbackBtn.addEventListener("click",function(a){a.preventDefault(),feedbackForm.classList.remove("visually-hidden"),feedbackForm.classList.add("modal-show"),overlay.classList.remove("visually-hidden"),storageName||storageEmail?(name.value=storageName,email.value=storageEmail,comment.focus()):storageName?(name.value=storageName,email.focus()):name.focus()}),closeFormBtn.addEventListener("click",function(a){a.preventDefault(),feedbackForm.classList.add("visually-hidden"),overlay.classList.add("visually-hidden"),feedbackForm.classList.remove("modal-error"),feedbackForm.classList.remove("modal-show")}),window.addEventListener("keydown",function(a){27===a.keyCode&&(a.preventDefault(),!feedbackForm.classList.contains("visually-hidden")&&(console.log("\u0424\u043E\u0440\u043C\u0430 \u043E\u0442\u043A\u0440\u044B\u0442\u0430"),feedbackForm.classList.add("visually-hidden"),feedbackForm.classList.remove("modal-error"),overlay.classList.add("visually-hidden"),feedbackForm.classList.remove("modal-show")))}),overlay.addEventListener("click",function(a){a.preventDefault(),feedbackForm.classList.contains("visually-hidden")||(console.log("\u0424\u043E\u0440\u043C\u0430 \u043E\u0442\u043A\u0440\u044B\u0442\u0430"),feedbackForm.classList.add("visually-hidden"),feedbackForm.classList.remove("modal-error"),overlay.classList.add("visually-hidden"),feedbackForm.classList.remove("modal-show"))}),feedbackForm.addEventListener("submit",function(a){name.value&&email.value&&comment.value?isStorageSupport&&(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(a.preventDefault(),feedbackForm.classList.remove("modal-error"),feedbackForm.offsetWidth=feedbackForm.offsetWidth,feedbackForm.classList.add("modal-error"),console.log("\u041D\u0443\u0436\u043D\u043E \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u0432\u0441\u0435 \u043F\u043E\u043B\u044F"))}),overlay.addEventListener("click",function(a){a.preventDefault(),feedbackForm.classList.add("visually-hidden"),overlay.classList.add("visually-hidden")}),ymaps.ready(function(){var a=new ymaps.Map("map",{center:[59.938631,30.323055],zoom:18},{searchControlProvider:"yandex#search"}),b=ymaps.templateLayoutFactory.createClass("<div style=\"color: #FFFFFF; font-weight: bold;\"\">$[properties.iconContent]</div>"),c=new ymaps.Placemark(a.getCenter(),{hintContent:"Gllacy Shop"},{iconLayout:"default#image",iconImageHref:"img/svg/pin.svg",iconImageSize:[80,140],iconImageOffset:[-40,-140]});a.geoObjects.add(c)});
